> è·ç¦»ç¬¬ä¸€æ¬¡æ¥è§¦å¤§æ•°æ®å·²ç»å¿«ä¸€å¹´äº†ï¼Œä¸­é—´å‚åŠ äº†ä¸ºæœŸ4ä¸ªæœˆå·¦å³çš„ä¸­å›½è½¯ä»¶æ¯ï¼Œæ‹¿äº†ä¸ªå›½å®¶ä¸‰ç­‰å¥–ï¼Œè¿˜ç®—æ˜¯ä¸ºæˆ‘æ—¶é—´çš„ç‰ºç‰²å¾—åˆ°äº†ä¸€ç‚¹å›æŠ¥ã€‚æš‘å‡åˆ°å‰åŠä¸ªæœˆï¼Œä¸€ç›´åœ¨å­¦JavaWebï¼Œæ¥è§¦äº†åå°ä¹‹åå¯¹å¾ˆå¤šçŸ¥è¯†æœ‰äº†æ›´æ·±å…¥çš„ç†è§£ï¼ŒåŒæ—¶ä¹Ÿå¯¹å¤§æ•°æ®çš„åº”ç”¨æœ‰äº†æ›´åŠ æ¸…æ™°çš„è®¤è¯†ã€‚ç›®å‰å‡†å¤‡èŠ±ä¸€ä¸ªæœˆçš„æ—¶é—´å°†å¤§æ•°æ®ç›¸å…³çš„çŸ¥è¯†æ€»ç»“ä¸€ä¸‹æ‹ä¸€ä¸‹ï¼Œç„¶åå†åšä¸€ä¸ªæ¨èç³»ç»Ÿæˆ–è€…åˆé€‚çš„å¤§æ•°æ®å¼€å‘é¡¹ç›®ã€‚æœ€åå°±å¼€å§‹è‹¦é€¼çš„å¤‡æˆ˜é¢è¯•å¤ä¹ äº†ã€‚
> >å¦‚æœä½ æƒ³å…¥é—¨å¤§æ•°æ®ï¼Œå¯¹å¤§æ•°æ®çš„ç”Ÿæ€åœˆæœ‰ä¸€ä¸ªæ¯”è¾ƒå…¨é¢çš„äº†è§£ï¼Œæˆ‘ç›¸ä¿¡æˆ‘çš„æ–‡ç« åº”è¯¥å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¸‹é¢å°±å¸¦ä½ èµ°è¿›å¤§æ•°æ®ï¼ˆè‡­å±Œä¸ï¼‰çš„ä¸–ç•Œã€‚
 ---

 Hadoopå¹ç‰›é€¼çš„è¯æˆ‘å°±ä¸å¤šä»‹ç»äº†ï¼Œæ–‡ç« æ ¸å¿ƒè¿˜æ˜¯æ”¾åœ¨å¯¹äºHadoopçš„è¿ç”¨ä»¥åŠç†è§£ä¸Šé¢ã€‚
 ## Apache Hadoop
 ---
 
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20181111185444304.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE1ODMzMTY=,size_16,color_FFFFFF,t_70)
 ---
> Hadoopæ˜¯ä¸€ä¸ªç”±ApacheåŸºé‡‘ä¼šæ‰€å¼€å‘çš„åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€æ¶æ„ã€‚
ç”¨æˆ·å¯ä»¥åœ¨ä¸äº†è§£åˆ†å¸ƒå¼åº•å±‚ç»†èŠ‚çš„æƒ…å†µä¸‹ï¼Œå¼€å‘åˆ†å¸ƒå¼ç¨‹åºã€‚å……åˆ†åˆ©ç”¨é›†ç¾¤çš„å¨åŠ›è¿›è¡Œé«˜é€Ÿè¿ç®—å’Œå­˜å‚¨ã€‚
[1]  Hadoopå®ç°äº†ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHadoop Distributed File Systemï¼‰ï¼Œç®€ç§°HDFSã€‚HDFSæœ‰é«˜å®¹é”™æ€§çš„ç‰¹ç‚¹ï¼Œå¹¶ä¸”è®¾è®¡ç”¨æ¥éƒ¨ç½²åœ¨ä½å»‰çš„ï¼ˆlow-costï¼‰ç¡¬ä»¶ä¸Šï¼›è€Œä¸”å®ƒæä¾›é«˜ååé‡ï¼ˆhigh throughputï¼‰æ¥è®¿é—®åº”ç”¨ç¨‹åºçš„æ•°æ®ï¼Œé€‚åˆé‚£äº›æœ‰ç€è¶…å¤§æ•°æ®é›†ï¼ˆlarge data setï¼‰çš„åº”ç”¨ç¨‹åºã€‚HDFSæ”¾å®½äº†ï¼ˆrelaxï¼‰POSIXçš„è¦æ±‚ï¼Œå¯ä»¥ä»¥æµçš„å½¢å¼è®¿é—®ï¼ˆstreaming accessï¼‰æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ•°æ®ã€‚
Hadoopçš„æ¡†æ¶æœ€æ ¸å¿ƒçš„è®¾è®¡å°±æ˜¯ï¼šHDFSå’ŒMapReduceã€‚HDFSä¸ºæµ·é‡çš„æ•°æ®æä¾›äº†å­˜å‚¨ï¼Œè€ŒMapReduceåˆ™ä¸ºæµ·é‡çš„æ•°æ®æä¾›äº†è®¡ç®—ã€‚ -----ç™¾åº¦ç™¾ç§‘

è¯´çš„æŒºé«˜çº§æŒºç‰›é€¼çš„ï¼Œå…¶å®çš„ç¡®ä¹Ÿç‰›é€¼ğŸ˜‚ã€‚ä¸å¾—ä¸ä½©æœè€å¤–å’‹èƒ½æå‡ºè¿™ç©æ„ã€‚Hadoopæ˜¯05å¹´å‡ºæ¥çš„ï¼Œè¯ç”Ÿäºè°·æ­Œä¸‰å¤§è®ºæ–‡GFS MapReduce BigTable ->Hdfs MapReduce Hbaseã€‚æ€»ä¹‹ï¼š Hadoopå¯ä»¥ç®€å•è®¤è¯†ä¸ºå¯æ‰©å±•çš„åˆ†å¸ƒå¼è®¡ç®—ï¼ˆå¤§æ•°æ®å­˜å‚¨åˆ†æç½‘ç»œæ•°æ®ï¼‰

## Hadoopçš„å‘å±•
---
>Hadoopç›®å‰ç»å†äº†1.xã€2.xã€åˆ°ç°åœ¨çš„3.xæˆ‘ä¸»è¦è¯´ä¸€ä¸‹1.xå’Œ2.xçš„åŒºåˆ«å§ï¼Œè¿™ä¸¤ä¸ªç‰ˆæœ¬çš„åŒºåˆ«ç®—æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ã€‚

##### Hadoop1.0å’ŒHadoop2.0ç‰ˆæœ¬ä¹‹é—´è¿˜æ˜¯å­˜åœ¨å¾ˆå¤§çš„å·®å¼‚çš„ã€‚
æ•´ä½“ä¸Šï¼Œ1.0ç‰ˆæœ¬æ˜¯ç”±åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»ŸHDFSå’Œåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶MapReduceç»„æˆï¼Œå…¶ä¸­HDFSç”±ä¸€ä¸ªNameNodeå’Œå¤šä¸ªDataNodeç»„æˆï¼ŒMapReduceç”±ä¸€ä¸ªJobTrackerå’Œå¤šä¸ªTaskTrackerç»„æˆã€‚

2.0ç‰ˆæœ¬ä¸­ï¼Œå¼•å…¥HDFS Fedrationï¼Œå®ƒè®©å¤šä¸ªNameNodeåˆ†ç®¡ä¸åŒçš„ç›®å½•è¿›è€Œå®ç°è®¿é—®éš”ç¦»å’Œæ¨ªå‘æ‹“å±•ï¼ŒåŒæ—¶è§£å†³äº†NameNodeå•ç‚¹æ•…éšœé—®é¢˜ï¼›å¼•å…¥èµ„æºç®¡ç†æ¡†æ¶Yarnï¼Œå¯ä»¥ä¸ºå„ç±»åº”ç”¨ç¨‹åºè¿›è¡Œèµ„æºç®¡ç†å’Œè°ƒåº¦ã€‚

## Hadoopçš„æ¡ˆä¾‹
---
* é˜¿é‡Œ æœ€å¼€å§‹ ç”¨çš„Hadoop-0.19.0 å¼€å§‹éå¸¸æ—©
* å¤§æ•°æ®ç»å…¸æ¡ˆä¾‹  ã€Šå•¤é…’ä¸å°¿å¸ƒã€‹ -->ç™¾åº¦å»å§ï¼Œæ‡’å¾—æ‰“å­—ï¼ğŸ˜‚
## Hadoopä¼ä¸šæ­å»ºæ ¸å¿ƒæ¶æ„
>æ­¤å›¾ä¹Ÿæ˜¯æˆ‘å¤§æ•°æ®å¤ä¹ é˜¶æ®µçš„æ ¸å¿ƒå†…å®¹ã€‚

![](https://i.imgur.com/CugfLXF.png)

å¯¹äºè¿™é‡Œé¢çš„éƒ¨åˆ†æ¡†æ¶æˆ‘æƒ³åšä¸ªç®€å•çš„è¯´æ˜ï¼Œä¹Ÿæ˜¯æˆ‘è‡ªå·±çš„ç†è§£ã€‚

* Hive å¤§æ•°æ®ä»“åº“ æ–¹ä¾¿å¼€å‘äººå‘˜å¯¹æ•°æ®å¤„ç†ç®€åŒ–å†™MRçš„è¿‡ç¨‹ åº•å±‚ä»»æ˜¯MR
* Sqoopï¼ˆSQLto Hadoop æ•°æ®è½¬æ¢ï¼‰ oozieï¼ˆä»»åŠ¡è°ƒåº¦ï¼‰ flumeï¼ˆæ–‡ä»¶æ”¶é›† å®æ—¶æœé›†ï¼‰ hueï¼ˆwebå·¥å…·ï¼‰ å¤§æ•°æ®è¾…åŠ©æ¡†æ¶
* Hbase åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆä¸€ä¸ªè¡¨å‡ åäº¿ä¸Šç™¾äº¿ ç§’çº§åˆ«æŸ¥è¯¢ï¼‰  å°±æ˜¯ä¸€ä¸ªæ•°æ®åº“ åšåˆ°å®æ—¶æŸ¥è¯¢  å¯ä»¥è¯´æ˜¯ä¸€ä¸ªDBAçš„è§’è‰²  
* spark æ•°æ®å¤„ç†æ¡†æ¶ è¿è¡Œåœ¨yarnä¸Šå¤„ç†Hdfs ä¸å¯æ›¿ä»£Hadoop å¿…é¡»çœ‹æºç  ç¤¾åŒºç‰¹åˆ«ç«   æ ¸å¿ƒRDD 

## Hadoopæ ¸å¿ƒæ¨¡å—
---
* Hadoop Common
ä¸ºå…¶ä»–hadoopæ¨¡å—æä¾›åŸºç¡€è®¾æ–½
* Hadoop Yarn
ä»»åŠ¡è°ƒåº¦ä¸èµ„æºç®¡ç†æ¡†æ¶
* Hadoop Hdfs
é«˜å¯é é«˜ååé‡çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ
* Hadoop Mapreduce
åˆ†å¸ƒå¼ç¦»çº¿å¹¶è¡Œè®¡ç®—æ¡†æ¶

ä¸‹é¢æˆ‘æŒ‰æ­¤é¡ºåºä¸€ä¸€ä»‹ç»ï¼š
1. Commonæ˜¯ä¸ºå…¶ä»–hadoopæ¨¡å—æä¾›åŸºç¡€è®¾æ–½ï¼Œä¸€èˆ¬æƒ…å†µæ²¡äººç¢°ä»–å§ï¼Œåæ­£æˆ‘æ²¡ç¢°è¿‡ã€‚
2.  Yarn æ•°æ®æ“ä½œç³»ç»Ÿï¼ˆäº‘æ“ä½œç³»ç»Ÿï¼‰ç±»ä¼¼ä¸Windowsæ“ä½œç³»ç»Ÿä¸ºå„ä¸ªè½¯ä»¶æä¾›æœåŠ¡ è´Ÿè´£æ•´ä¸ªé›†ç¾¤ç®¡ç†è°ƒåº¦ç›‘æ§ï¼ˆä¸ºå„ç§æ¡†æ¶åˆ†é…èµ„æºè¿›è¡Œéš”ç¦»Container å®¹å™¨ï¼šå°†ä»»åŠ¡æ”¾å…¥å…¶ä¸­è¿›è¡Œéš”ç¦»ï¼‰
>æ¶æ„å›¾

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20181111194440133.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE1ODMzMTY=,size_16,color_FFFFFF,t_70)
* ResourceManager:å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼›å¯åŠ¨/ç›‘æ§ApplicationMaster;ç›‘æ§NodeManager;èµ„æºåˆ†é…ä¸è°ƒåº¦
* ApplicationMaster:æ•°æ®åˆ‡åˆ†ï¼›ä¸ºåº”ç”¨ç¨‹åºç”³è¯·èµ„æºï¼Œå¹¶åˆ†é…ç»™å†…éƒ¨ä»»åŠ¡ï¼›ä»»åŠ¡ç›‘æ§ä¸å®¹é”™
* NodeManager:å•ä¸ªèŠ‚ç‚¹ä¸Šçš„èµ„æºç®¡ç†ï¼›å¤„ç†æ¥è‡ªResourceManagerçš„å‘½ä»¤ï¼›å¤„ç†æ¥è‡ªApplicationMasterçš„å‘½ä»¤
* Container:å¯¹ä»»åŠ¡è¿è¡Œç¯å¢ƒçš„æŠ½è±¡ï¼Œå°è£…äº†CPUã€å†…å­˜ç­‰å¤šç»´èµ„æºä»¥åŠç¯å¢ƒå˜é‡ã€å¯åŠ¨å‘½ä»¤ç­‰ä»»åŠ¡è¿è¡Œç›¸å…³çš„ä¿¡æ¯
3. HDFS å®˜æ–¹ä¸€ç‚¹çš„è¯´æ³•æ˜¯é«˜å¯é é«˜ååé‡çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚ä»¥æµå¼æ•°æ®è®¿é—®æ¨¡å¼æ¥å­˜å‚¨è¶…å¤§æ–‡ä»¶ï¼Œè¿è¡Œäºå•†ç”¨ç¡¬ä»¶é›†ç¾¤ä¸Šï¼Œæ˜¯ç®¡ç†ç½‘ç»œä¸­è·¨å¤šå°è®¡ç®—æœºå­˜å‚¨çš„æ–‡ä»¶ç³»ç»Ÿã€‚ç®€å•çš„ç†è§£å°±æ˜¯ä¸€ä¸ªè¶…çº§å¤§ç¡¬ç›˜ï¼Œç™¾åº¦äº‘ç›˜ï¼Œ360äº‘ç›˜ä¼°è®¡ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ 
HDFSä¸é€‚åˆç”¨åœ¨ï¼šè¦æ±‚ä½æ—¶é—´å»¶è¿Ÿæ•°æ®è®¿é—®çš„åº”ç”¨ï¼Œå­˜å‚¨å¤§é‡çš„å°æ–‡ä»¶ï¼Œå¤šç”¨æˆ·å†™å…¥ï¼Œä»»æ„ä¿®æ”¹æ–‡ä»¶ã€‚
å€¼å¾—ä¸€æçš„æ˜¯ï¼šåœ¨HDFSä¸Šæ•°æ®æ˜¯ä»¥blockçš„æ–¹å¼å­˜å‚¨çš„
HDFSæ•°æ®å—ï¼šHDFSä¸Šçš„æ–‡ä»¶è¢«åˆ’åˆ†ä¸ºå—å¤§å°çš„å¤šä¸ªåˆ†å—ï¼Œä½œä¸ºç‹¬ç«‹çš„å­˜å‚¨å•å…ƒï¼Œç§°ä¸ºæ•°æ®å—ã€‚é»˜è®¤64M.
>å¦‚ï¼š128 M
200M
blk_0001ï¼š128M
blk_0002 : 72M

##### ä½¿ç”¨æ•°æ®å—çš„å¥½å¤„æ˜¯ï¼š
* ä¸€ä¸ªæ–‡ä»¶çš„å¤§å°å¯ä»¥å¤§äºç½‘ç»œä¸­ä»»æ„ä¸€ä¸ªç£ç›˜çš„å®¹é‡ã€‚æ–‡ä»¶çš„æ‰€æœ‰å—ä¸éœ€è¦å­˜å‚¨åœ¨åŒä¸€ä¸ªç£ç›˜ä¸Šï¼Œå› æ­¤å®ƒä»¬å¯ä»¥åˆ©ç”¨é›†ç¾¤ä¸Šçš„ä»»æ„ä¸€ä¸ªç£ç›˜è¿›è¡Œå­˜å‚¨ã€‚
* ç®€åŒ–äº†å­˜å‚¨å­ç³»ç»Ÿçš„è®¾è®¡ï¼Œå°†å­˜å‚¨å­ç³»ç»Ÿæ§åˆ¶å•å…ƒè®¾ç½®ä¸ºå—ï¼Œå¯ç®€åŒ–å­˜å‚¨ç®¡ç†ï¼ŒåŒæ—¶å…ƒæ•°æ®å°±ä¸éœ€è¦å’Œå—ä¸€åŒå­˜å‚¨ï¼Œç”¨ä¸€ä¸ªå•ç‹¬çš„ç³»ç»Ÿå°±å¯ä»¥ç®¡ç†è¿™äº›å—çš„å…ƒæ•°æ®ã€‚
* æ•°æ®å—é€‚åˆç”¨äºæ•°æ®å¤‡ä»½è¿›è€Œæä¾›æ•°æ®å®¹é”™èƒ½åŠ›å’Œæé«˜å¯ç”¨æ€§ã€‚
>ä¸Šæ¶æ„å›¾ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20181111193209571.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE1ODMzMTY=,size_16,color_FFFFFF,t_70)
##### åœ¨è¿™é‡Œä¸»è¦æ³¨æ„çš„æ˜¯ 
1. HDFSæ–‡ä»¶ç³»ç»Ÿç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šNamenodeï¼ˆæ˜¯å­˜åœ¨å†…å­˜å½“ä¸­çš„ï¼Œæœ¬åœ°ç£ç›˜ä¹Ÿæœ‰ä»–çš„å¤‡ä»½
fsimageï¼šé•œåƒæ–‡ä»¶editesï¼šç¼–è¾‘æ—¥å¿—  ï¼‰ Datanode Secondary Namenodeï¼ˆç”¨æ¥ç›‘æ§HDFSçŠ¶æ€çš„è¾…åŠ©åå°ç¨‹åºï¼Œæ¯éš”ä¸€æ®µæ—¶é—´è·å–HDFSå…ƒæ•°æ®çš„å¿«ç…§ï¼‰ã€‚
2. åœ¨HDFSä¸Šï¼Œæ–‡ä»¶æ˜¯ä»¥å—ä¿å­˜çš„ï¼Œé»˜è®¤å­˜å…¥ä¸‰ä¸ªå‰¯æœ¬ã€‚é»˜è®¤æ˜¯åœ¨HDFSå®¢æˆ·ç«¯ä¸Šæ”¾ç¬¬ä¸€ä¸ªå‰¯æœ¬ï¼Œç¬¬äºŒä¸ªå‰¯æœ¬æ”¾åœ¨ä¸ç¬¬ä¸€ä¸ªä¸åŒä¸”éšæœºçš„å¦å¤–çš„é€‰æ‹©çš„æœºæ¶ä¸­çš„èŠ‚ç‚¹ä¸Šã€‚ç¬¬ä¸‰ä¸ªå‰¯æœ¬ä¸ç¬¬äºŒä¸ªå‰¯æœ¬åœ¨åŒä¸€ä¸ªæœºæ¶ä½†æ˜¯ä¸åŒèŠ‚ç‚¹ä¸Šã€‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20181113175119582.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE1ODMzMTY=,size_16,color_FFFFFF,t_70)
3. æ•°æ®çš„å­˜å–ï¼ˆæ•°æ®æµä¸ç»è¿‡namenodeï¼‰ä»…ä»…é€šè¿‡Datanodeï¼ŒNamenodeåªæ˜¯ä¿å­˜çš„ä¸€äº›å…ƒæ•°æ®ã€‚

</br>
4. Mapreduceç¦»çº¿è®¡ç®—æ¡†æ¶ 

>Mapreduceçš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œåˆ†è€Œæ²»ä¹‹â€ï¼Œå­¦è¿‡åˆ†æ²»æ³•çš„åº”è¯¥å¾ˆç†Ÿæ‚‰ï¼Œæ¯”å¦‚ä»–å°†ä¸€ä¸ª10Gçš„æ•°æ®é‡åˆ†é…ï¼ˆmapï¼‰ç»™10ä¸ªCPUè®¡ç®—ï¼Œæœ€åå°†ç»“æœæ”¶é›†ï¼ˆreduceï¼‰åˆ°ä¸€èµ·ï¼Œè¿™å°±æ˜¯Mapreduceå·¥ä½œçš„åŸºæœ¬æµç¨‹ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20181111195350115.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE1ODMzMTY=,size_16,color_FFFFFF,t_70)

##### MapreduceåŸç†
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20181111195603372.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE1ODMzMTY=,size_16,color_FFFFFF,t_70)
##### Mapä»»åŠ¡å¤„ç†

ã€€ã€€1.1 è¯»å–HDFSä¸­çš„æ–‡ä»¶ã€‚æ¯ä¸€è¡Œè§£ææˆä¸€ä¸ª<k,v>ã€‚æ¯ä¸€ä¸ªé”®å€¼å¯¹è°ƒç”¨ä¸€æ¬¡mapå‡½æ•°ã€‚        

ã€€ã€€1.2 è¦†ç›–map()ï¼Œæ¥æ”¶1.1äº§ç”Ÿçš„<k,v>ï¼Œè¿›è¡Œå¤„ç†ï¼Œè½¬æ¢ä¸ºæ–°çš„<k,v>è¾“å‡ºã€‚ã€€

ã€€ã€€1.3 å¯¹1.2è¾“å‡ºçš„<k,v>è¿›è¡Œåˆ†åŒºã€‚é»˜è®¤åˆ†ä¸ºä¸€ä¸ªåŒº.

ã€€ã€€1.4 å¯¹ä¸åŒåˆ†åŒºä¸­çš„æ•°æ®è¿›è¡Œæ’åºï¼ˆæŒ‰ç…§kï¼‰ã€åˆ†ç»„ã€‚

ã€€ã€€1.5å¯¹åˆ†ç»„åçš„æ•°æ®è¿›è¡Œå½’çº¦ã€‚

##### Reduceä»»åŠ¡å¤„ç†

ã€€ã€€2.1 å¤šä¸ªmapä»»åŠ¡çš„è¾“å‡ºï¼ŒæŒ‰ç…§ä¸åŒçš„åˆ†åŒºï¼Œé€šè¿‡ç½‘ç»œcopyåˆ°ä¸åŒçš„reduceèŠ‚ç‚¹ä¸Šã€‚

ã€€ã€€2.2 å¯¹å¤šä¸ªmapçš„è¾“å‡ºè¿›è¡Œåˆå¹¶ã€æ’åºã€‚è¦†ç›–reduceå‡½æ•°ï¼Œæ¥æ”¶çš„æ˜¯åˆ†ç»„åçš„æ•°æ®ï¼Œå®ç°è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¤„ç†åï¼Œäº§ç”Ÿæ–°çš„<k,v>è¾“å‡ºã€‚

ã€€ã€€2.3 å¯¹reduceè¾“å‡ºçš„<k,v>å†™åˆ°HDFSä¸­ã€‚

-----
åŸºæœ¬å†…å®¹ä»‹ç»å®Œäº†ï¼Œæ¥ä¸‹æ¥è¯´è¯´Hadoopåˆ°åº•æ€ä¹ˆç©?Hadoopæœ‰ä¸‰ç§è¿è¡Œæ–¹å¼ï¼Œå•æœºæ¨¡å¼ï¼Œä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼Œåˆ†å¸ƒå¼æ¨¡å¼ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸€å­¦ä¹ ã€‚
## Hadoopå®‰è£…ä¸é…ç½®
>http://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SingleCluster.html è¿™ä¸ªç½‘ç«™æ˜¯æƒå¨æˆ‘åŸºæœ¬ä¸Šä¹Ÿæ˜¯çœ‹ç€è¿™ä¸ªæ¥çš„ã€‚
##### Hadoopçš„è¿è¡Œéœ€è¦javaç¯å¢ƒ
1. å®‰è£…JDKï¼Œç…§ç€æ“ä½œè¡Œäº†ï¼Œæ²¡ä»€ä¹ˆéš¾ç‚¹ã€‚
*  rpm -qa|grep java 
xxx yyy zzzä¸ºä½ è¦å¸è½½çš„æ’ä»¶ï¼Œæ’ä»¶ä¹‹é—´ä»¥ç©ºæ ¼éš”å¼€
rpm -e --nodeps xxx yyy zzz
* rpm -ivh jdk-8u172-linux-x64.rpm 
*  vim /etc/profile
export JAVA_HOME=/usr/java/default
export PATH=$JAVA_HOME/bin:$PATH
* source /etc/profile
* echo $JAVA_HOME
##### ä¸Šä¼ Hadoop è§£å‹å®‰è£…
##### ç›´æ¥å¼€å§‹ç©å•èŠ‚ç‚¹
* $ mkdir input
* $ cp etc/hadoop/*.xml input
* $ bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.3.jar grep input output 'dfs[a-z.]+'
* $ cat output/*
*  bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.3.jar wordcount wcinput wcoutput
ï¼ˆç»å…¸æ¡ˆä¾‹  ç»Ÿè®¡å•è¯ä¸ªæ•°ï¼‰
##### ä¼ªåˆ†å¸ƒå¼
* æ ¸å¿ƒé…ç½®æ–‡ä»¶
![](https://i.imgur.com/ZU5EPOJ.png)
è¿™äº›éƒ½æ˜¯éœ€è¦æˆ‘ä»¬ä¿®æ”¹çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥æ“ä½œã€‚
* core-site.xml 
 ![](https://i.imgur.com/NBWT4eM.png)
å‰è€…é…ç½® dfsæ–‡ä»¶ç³»ç»Ÿ æŒ‡å®šäº†namenodeè¿è¡Œçš„èŠ‚ç‚¹
åè€…é…ç½®æ–‡ä»¶ä¸´æ—¶ç›®å½• è¦†ç›–åˆ°é»˜è®¤çš„ç›®å½•
* hdfs-site.xml
 ![](https://i.imgur.com/p3CHWQ8.png)
é…ç½®æ–‡ä»¶å¤‡ä»½æ•°  åœ¨æ­¤ä¸ºä¸€ä»½  å› ä¸ºç›®å‰æ˜¯ä¼ªåˆ†å¸ƒå¼  åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹
* yarn-site.xml
![](https://i.imgur.com/VuRX3ww.png)
å‰è€…é…ç½® è¿è¡ŒMapReduce 
åè€…é…ç½® yarnä¸»æœº 
* ä¿®æ”¹mapred-site.xml

```<configuration>
<configuration>
    <property>
        <name>mapreduce.framework.name</name>
        <value>yarn</value>
    </property>
</configuration>
```
è®¾ç½®MapReduceè¿è¡Œåœ¨yarnä¸Š
* æ ¼å¼åŒ–hdfsæ–‡ä»¶ç³»ç»Ÿ 
bin/hdfs namenode -format
æ³¨æ„ï¼šæ ¼å¼åŒ–ç¡®è®¤è¾“å…¥Y
* å¯åŠ¨Hadoop
sbin/hadoop-daemon.sh start namenode 
sbin/hadoop-daemon.sh start datanode
* å¯åŠ¨Yarn
sbin/yarn-daemon.sh start resourcemanager
sbin/yarn-daemon.sh start nodemanager

### æ³¨æ„
1. æœ€å¥½ä¿®æ”¹ä¸‰ä¸ªé…ç½®æ–‡ä»¶è„šæœ¬   mapred-env.sh yarn-env.sh  hadoop-env.sh
* é…ç½®å¥½JDKè·¯å¾„ /usr/java/jdk1.8.0_91
2. There are 0 datanode(s) running and no node(s) are excluded in this operation.

 å‡ºç°ä¸Šè¿°é—®é¢˜å¯èƒ½æ˜¯æ ¼å¼åŒ–ä¸¤æ¬¡hadoopï¼Œå¯¼è‡´æ²¡æœ‰datanode

è§£å†³åŠæ³•æ˜¯ï¼šæ‰¾åˆ°hadoopå®‰è£…ç›®å½•ä¸‹ hadoop-2.4.1/data/dfs/dataé‡Œé¢çš„currentæ–‡ä»¶å¤¹åˆ é™¤

ç„¶åä»æ–°æ‰§è¡Œä¸€ä¸‹ hadoop namenode -format

å†ä½¿ç”¨start-dfs.shå’Œstart-yarn.sh é‡å¯ä¸€ä¸‹hadoop

ç”¨jpså‘½ä»¤çœ‹ä¸€ä¸‹å°±å¯ä»¥çœ‹è§datanodeå·²ç»å¯åŠ¨äº†
### å®‰è£…å¸¸è§é—®é¢˜è§£å†³
* bin/hdfs namenode -format 

åŸå› ï¼šcore-site.xml æ–‡ä»¶éƒ¨åˆ†å†…å®¹å†™é”™  æˆ–è€…ä¸»æœºåä¸ipçš„æ˜ å°„å†™é”™

* namenodeå¯åŠ¨å‡ºé”™ 

åŸå› ï¼šè‡ªæŸ¥æ—¥å¿—æ–‡ä»¶ï¼ˆlogsï¼‰
## ç»“æŸ
åˆ°æ­¤ä¼ªåˆ†å¸ƒå¼çš„åŸºç¡€é…ç½®åŸºæœ¬ä¸Šå°±ç»“æŸäº†ï¼Œå¯¹äºåˆ†å¸ƒå¼ï¼šå¤šæå‡ å°æœºå™¨  ä¿®æ”¹DataNodeä¸ªæ•°  é…ç½®slaveï¼ˆæŒ‡å®šDataNodeï¼‰æ–‡ä»¶  é…ç½®hostsæ–‡ä»¶ ssh  OK  OKä¸ï¼Ÿ  åæ­£æˆ‘ä¸æƒ³æ‰“å­—å†™åˆ†å¸ƒå¼é…ç½®äº†ã€‚

----
## å…¶ä»–é…ç½®
1. Yarnä¸Šçš„å†å²æœåŠ¡æŸ¥çœ‹ï¼ˆæ—¥å¿—èšé›†ï¼‰
ä¿®æ”¹yarn-site.xml
![](https://i.imgur.com/vedphYN.png)
å‰è€…  å¯åŠ¨æ—¥å¿—èšé›† 
åè€…  è®¾è®¡æŠ¥åºŸæ—¶é—´

* å¯åŠ¨yarn yarn historyserver å†é‡è·‘ä»»åŠ¡ ï¼Œæœ€åè®¿é—®æŸ¥çœ‹ã€‚
* åœ¨sbinç›®å½•ä¸‹ ./mr-jobhistory-daemon.sh start historyserver
* åœ¨sbinç›®å½•ä¸‹ ./mr-jobhistory-daemon.sh stop historyserver
2.  hdfsåƒåœ¾å›æ”¶
hdfs-site.xml 
![](https://i.imgur.com/d8NODuH.png)
(å†™æˆå…·ä½“å€¼å¦åˆ™å‡ºé”™)
åœ¨åƒåœ¾ç®±ä¸­å¯ä»¥æ¢å¤æ–‡ä»¶
3. Secondarynamenode
![](https://i.imgur.com/xN1SeN9.png)
  ![](https://i.imgur.com/iHm2cF0.png)

3. åˆ†å¼€å¯åŠ¨
![](https://i.imgur.com/yyzS8D9.png)
4.  ä¸€é”®å¯åŠ¨
start-all.shï¼ˆä¸æ¨èï¼‰ 

5. éœ€è¦é…ç½®sshç§˜é’¥  
* cd ~
* ssh-keygen -t rsa
* ssh-copy-id master
* æµ‹è¯•
* ssh master
* exit



###  å‹æƒ…æé†’
<font color="red"> æˆ‘çš„é…ç½®ä¸­ç”¨çš„æ˜¯IP æ²¡æœ‰å†™ä¸»æœºåmaster,è®¿é—®è·¯å¾„å•¥çš„å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œä½ å‚ç…§ç€å®˜ç½‘çš„å†…å®¹ï¼Œåˆ«ä¸€è‚¡è„‘ç…§ç€å…¨èˆ¬äº†ã€‚</font>

----
## æ€»ç»“
---
å…³äºHadoopçš„å­¦ä¹ ï¼Œè¿™ä»…ä»…æ˜¯ä¸ªå…¥é—¨ï¼ŒHadoopæ ¸å¿ƒçš„å†…å®¹åœ¨åé¢å‡ ç¯‡æ–‡ç« é‡Œé¢ï¼Œæ­¤æ–‡ä¸»è¦ç»™æ²¡æœ‰åŸºç¡€çš„æœ‹å‹äº†è§£Hadoopä»¥åŠç®€å•ä½¿ç”¨Hadoopã€‚è¯´å®è¯ï¼Œè¿™ç¯‡æ–‡ç« æ’ç‰ˆæœ‰ä¸€ç‚¹ç‚¹çš„ä¹±ï¼Œåé¢æœ‰æ—¶é—´åœ¨ä¸€ç‚¹ç‚¹ä¿®è®¢è¡¥å……å§ã€‚è™½ç„¶æ—¶é—´æŒºç´§å¼ çš„ï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰èŠ±ä¸ªä¸€ä¿©å°æ—¶æ€»ç»“ä¹Ÿæ˜¯æŒºä¸»è¦çš„ï¼Œè¿™ç‚¹æ—¶é—´æˆæœ¬è¿˜æ˜¯æŒºå€¼å¾—ã€‚ğŸ¤”
